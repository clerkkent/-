webpackJsonp([8],{1057:function(t,e,a){"use strict";(function(t){var n=a(113),s=a.n(n),l=a(37),i=a.n(l),o=a(38),c=a.n(o),u=a(40),r=a.n(u),d=a(39),m=a.n(d),h=a(4),f=a.n(h),p=(a(114),a(965)),b=a.n(p),g=(a(214),a(964),function(e){function a(t){i()(this,a);var e=r()(this,(a.__proto__||s()(a)).call(this,t));return e.setChecked=e.setChecked.bind(e),e.state={checkStatus:0,_delAllStatus:e.props.delAllStatus||0},e}return m()(a,e),c()(a,[{key:"componentWillReceiveProps",value:function(t){var e=this;this.state._delAllStatus!==t.delAllStatus&&this.setState({_delAllStatus:t.delAllStatus},function(){e.setState({checkStatus:1===e.state._delAllStatus?1:0})})}},{key:"setChecked",value:function(e){var a=this;this.setState({_delAllStatus:0},function(){a.setState({checkStatus:0===a.state.checkStatus?1:0},function(){var e=t("#scrollWrapItem0").find(".checkbox-icon-ed").length;t("#delCount").text("("+e+")"),e>0?t("#delStatus").addClass("all-count-right").removeClass("all-count"):t("#delStatus").addClass("all-count").removeClass("all-count-right")})})}},{key:"render",value:function(){var t=this,e=this.props,a=e.item,n=e.delStatus,s=a.thread;return f.a.createElement("div",{className:b.a["list-box-center"]},"del"===n&&f.a.createElement("div",{id:a.id,className:1===this.state._delAllStatus?"checkbox-icon-ed":2===this.state._delAllStatus?"checkbox-icon":0===this.state.checkStatus?"checkbox-icon":"checkbox-icon-ed",onClick:function(){return t.setChecked(a.id)}}),f.a.createElement("div",{className:b.a["list-box-flex"]},f.a.createElement("div",{className:b.a["comment-content"]},a.content),f.a.createElement("div",{className:b.a["list-time-box-thread"]},a.created_at),s&&f.a.createElement("div",{className:b.a["comment-thread"]},f.a.createElement("span",null,"原帖:")," ",s.title)))}}]),a}(h.Component));e.a=g}).call(e,a(339))},856:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t,n){var s=a(77),l=a.n(s),i=a(55),o=a.n(i),c=a(113),u=a.n(c),r=a(37),d=a.n(r),m=a(38),h=a.n(m),f=a(40),p=a.n(f),b=a(39),g=a.n(b),v=a(4),S=a.n(v),x=a(114),k=a(214),C=a(340),N=a(968),_=a(965),y=a.n(_),E=a(888),T=a.n(E),A=a(966),w=a(213),I=a(1057),P=a(967),B=function(e){function s(){d()(this,s);var t=p()(this,(s.__proto__||u()(s)).call(this));return t.delInfo=t.delInfo.bind(t),t.delAllMessage=t.delAllMessage.bind(t),t.delCount=t.delCount.bind(t),t.delClick=t.delClick.bind(t),t.state={delStatus:"",delTxt:"全部",delAllStatus:0,delCount:0,delNewDataStatus:!1,checkEd:[],delBtn:0,topDel:"删除"},t}return g()(s,e),h()(s,[{key:"componentWillMount",value:function(){var t=this,e=this.props.commentList;e&&0===e.length&&this.props.dispatch(A.a({pageNum:10,page:"1",cb:function(){t.initMui()}}))}},{key:"componentDidMount",value:function(){}},{key:"initMui",value:function(){t(".home-slider").slider(),this.initPullRefresh()}},{key:"initPullRefresh",value:function(e){var a=this.props.commentList;this.setState({delStatus:" ",delCount:0,delTxt:"全部",delAllStatus:0,delBtn:a.length>0?1:0,topDel:"删除"});var n=this;t("#refreshContainer_0").pullRefresh({down:{indicators:!1,style:"circle",color:"#2BD009",height:100,auto:!0,callback:function(){var a=this;n.props.dispatch(A.a({pageNum:10,page:"1",refresh:!0,cb:function(s){n.setState({delCount:1===n.state.delAllStatus?s.data.list.length:n.state.delCount}),a.endPulldownToRefresh(!0),a.refresh(!0),e&&t("#refreshContainer_0").scroll().scrollTo(0,0)}}))}},up:{indicators:!1,style:"circle",height:50,auto:!1,contentrefresh:"正在加载...",contentnomore:"没有更多了，逛逛网利社区其他～",callback:function(){var t=this,e=n.props.commentPage,a=parseInt(e)+1;n.props.dispatch(A.a({pageNum:10,page:a,cb:function(e){n.setState({delCount:1===n.state.delAllStatus?n.state.delCount+e.data.data.length:n.state.delCount}),e.data.last_page>a?t.endPullupToRefresh(!1):e.data.last_page<=a&&t.endPullupToRefresh(!0)}}))}}})}},{key:"delInfo",value:function(t){this.setState({delStatus:t})}},{key:"delCount",value:function(t){var e=this;this.setState({delCount:n("#scrollWrapItem0").find(".checkbox-icon-ed").length},function(){1!==t&&0!==e.state.delCount||e.setState({delTxt:1===t||0===e.state.delCount?"全部":"取消全部"},function(){var t="全部"===e.state.delTxt?0:1;e.setState({delAllStatus:t})})})}},{key:"delAllMessage",value:function(){var t=this;this.setState({delTxt:"全部"===this.state.delTxt?"取消全部":"全部"},function(){var e="全部"===t.state.delTxt?0:1;t.setState({delAllStatus:e},function(){t.setState({delCount:n("#scrollWrapItem0").find(".checkbox-icon-ed").length})})})}},{key:"delClick",value:function(){var t=this,e=n("#messageBox").find("#scrollWrapItem0").find(".checkbox-icon-ed"),s=[];n.each(e,function(t,e){s.push(n(e).attr("id"))}),this.setState({checkEd:s},function(){t.state.checkEd.length>0&&t.Alert.show({content:"确定要清空所选消息吗？",confirm:function(){a.i(w.delBbsComment)(t.state.checkEd).then(function(e){0===e.result.code&&t.initPullRefresh(!0)})}})})}},{key:"render",value:function(){var t=this,e=this.props,a=e.initCommentState,n=e.commentList;return S.a.createElement("div",{className:y.a["list-main"]},S.a.createElement("div",{className:"home-slider mui-slider mui-fullscreen"},S.a.createElement(C.a,{titleContent:"我的评论",rightContent:(n.length>0||1===this.state.delBtn)&&S.a.createElement(N.a,{delInfo:this.delInfo,topDel:this.state.topDel}),titleClass:"flex-3"}),S.a.createElement("div",{className:"m-s-w-1 mui-slider-group",id:"messageBox"},S.a.createElement("div",l()({id:"scrollWrapItem0",className:y.a["list-slider-box"]},"className","mui-slider-item list-bottom mui-control-content  mui-active"),S.a.createElement("div",{id:"refreshContainer_0",className:"mui-scroll-wrapper"+("del"===this.state.delStatus?" w120":"")},S.a.createElement("div",{id:"box-0",className:y.a["box-max"]},a&&n.length>0?n.map(function(e,a){return S.a.createElement(I.a,{item:e,key:a,delStatus:t.state.delStatus,delAllStatus:t.state.delAllStatus,delCount:t.delCount})}):S.a.createElement(P.a,o()({className:T.a["no-comment"],title:"暂时还没有发帖喔"},this.props),S.a.createElement("div",null,"去发帖",S.a.createElement("icon",null)))))))),"del"===this.state.delStatus&&S.a.createElement("div",{className:y.a["del-main"]},S.a.createElement("div",{className:y.a["all-del"],onClick:function(){return t.delAllMessage()}},this.state.delTxt),S.a.createElement("div",{id:"delStatus",className:y.a[this.state.delCount>0?"all-count-right":"all-count"],onClick:function(){return t.delClick()}},"删除",S.a.createElement("span",{id:"delCount"},this.state.delCount>0?"("+this.state.delCount+")":""))))}}]),s}(v.Component);e.default=a.i(x.e)(a.i(k.b)(function(t){return t.list})(B))}.call(e,a(215),a(339))},888:function(t,e){t.exports={"no-collection":"no-collection-33_zG","default-panel-main":"default-panel-main-21AMA","no-comment":"no-comment-3CH7P","no-message":"no-message-1C-gb","no-thread":"no-thread-3yuWS","default-icon":"default-icon-1d3wl","jump-page":"jump-page-1wdXI"}},964:function(t,e,a){"use strict";a.d(e,"a",function(){return l}),a.d(e,"b",function(){return i});var n=a(78),s=a(213),l=function(t){return function(e){a.i(s.getBbsUserPm)({params:[{pageNum:t.pageNum,page:t.page,type:t.type}]}).then(function(s){if(s.result){var l=s.result.data.list,i=t.page,o=t.type,c=(s.result.data.last_page,t.refresh||!1),u=l.length;"1"===i&&e(a.i(n.b)("change message count")({listLength:u})),e(a.i(n.b)("fetch message list success")({list:l,page:i,typeid:o,refresh:c})),setTimeout(function(){t.cb&&t.cb(s.result)},0)}})}},i=function(t){return function(e){a.i(s.updatePmStatus)({params:[{id:t.id}]}).then(function(t){if(t.result){var a=t.result.data;e({type:"get update pm status",pmStatus:a})}})}}},965:function(t,e){t.exports={"list-main":"list-main-eiRbM",row:"row-3lnBN","row-title":"row-title-2yIio","row-text":"row-text-2eOW3","list-slider-box":"list-slider-box-3ergh","box-max":"box-max-S994q","list-box-flex":"list-box-flex-3KjVu","list-box-center":"list-box-center-NyeP7","comment-content":"comment-content-2N-xS","comment-thread":"comment-thread-1Y_By","list-box-item":"list-box-item-1qSxw","list-item-title":"list-item-title-xrbo_",views:"views-1vfIJ","list-time-box":"list-time-box-3JQ5_","list-time-box-thread":"list-time-box-thread-3t9Y2","del-main":"del-main-11AGj","all-del":"all-del-2mT3b","all-count":"all-count-1IVir","all-count-right":"all-count-right-1z4J4"}},966:function(t,e,a){"use strict";a.d(e,"d",function(){return l}),a.d(e,"c",function(){return i}),a.d(e,"b",function(){return o}),a.d(e,"a",function(){return c});var n=a(78),s=a(213),l=function(t){return function(e){a.i(s.getBbsUserThread)({params:[{pageNum:t.pageNum,page:t.page}]}).then(function(s){if(s.result){var l=s.result.data.list,i=t.page,o=s.result.data.last_page,c=t.refresh||!1;e(a.i(n.b)("fetch bbs user thread")({list:l,page:i,lastPage:o,refresh:c})),setTimeout(function(){t.cb&&t.cb(s.result)},0)}})}},i=function(t){return function(e){a.i(s.queryBbsUserTask)().then(function(s){if(s.result){var l=s.result.data;e(a.i(n.b)("fetch bbs user task")({taskData:l})),setTimeout(function(){t.cb&&t.cb(s.result)},0)}})}},o=function(t){return function(e){a.i(s.getBbsUserCollectList)({params:[{pageNum:t.pageNum,page:t.page}]}).then(function(s){if(s.result){var l=s.result.data.data,i=t.page,o=s.result.data.last_page,c=t.refresh||!1;e(a.i(n.b)("fetch bbs user collectList")({data:l,page:i,lastPage:o,refresh:c})),setTimeout(function(){t.cb&&t.cb(s.result)},0)}})}},c=function(t){return function(e){a.i(s.getBbsUserComment)({params:[{pageNum:t.pageNum,page:t.page}]}).then(function(s){if(s.result){var l=s.result.data.data,i=t.page,o=s.result.data.last_page,c=t.refresh||!1;e(a.i(n.b)("fetch bbs user comment")({data:l,page:i,lastPage:o,refresh:c})),setTimeout(function(){t.cb&&t.cb(s.result)},0)}})}}},967:function(t,e,a){"use strict";var n=a(77),s=a.n(n),l=a(113),i=a.n(l),o=a(37),c=a.n(o),u=a(38),r=a.n(u),d=a(40),m=a.n(d),h=a(39),f=a.n(h),p=a(4),b=a.n(p),g=a(888),v=a.n(g),S=a(96),x=a.n(S),k=function(t){function e(){return c()(this,e),m()(this,(e.__proto__||i()(e)).apply(this,arguments))}return f()(e,t),r()(e,[{key:"goToIndex",value:function(){this.props.history.push("/")}},{key:"render",value:function(){var t=this,e=this.props,a=e.className,n=e.title,l=x()("default-panel",s()({},a,!!a));return b.a.createElement("section",{className:l},b.a.createElement("div",{className:v.a["default-panel-main"]},b.a.createElement("div",{className:v.a["default-panel-body"]},b.a.createElement("icon",{className:v.a["default-icon"]}),n&&b.a.createElement("p",null,n),b.a.createElement("div",{className:v.a["jump-page"],onClick:function(){return t.goToIndex()}},this.props.children))))}}]),e}(p.Component);e.a=k},968:function(t,e,a){"use strict";var n=a(113),s=a.n(n),l=a(37),i=a.n(l),o=a(38),c=a.n(o),u=a(40),r=a.n(u),d=a(39),m=a.n(d),h=a(4),f=a.n(h),p=a(114),b=a(969),g=a.n(b),v=function(t){function e(){i()(this,e);var t=r()(this,(e.__proto__||s()(e)).call(this));return t.delList=t.delList.bind(t),t.state={stateTxt:"删除",status:"del",btnStatus:0},t}return m()(e,t),c()(e,[{key:"componentWillReceiveProps",value:function(t){0===this.state.btnStatus&&this.state.stateTxt!==t.topDel&&this.setState({stateTxt:t.topDel})}},{key:"delList",value:function(){var t=this;this.setState({status:"删除"===this.state.stateTxt?"del":"cancel"},function(){t.setState({stateTxt:"del"===t.state.status?"取消":"删除",btnStatus:1},function(){t.props.delInfo(t.state.status),t.setState({btnStatus:0})})})}},{key:"render",value:function(){return f.a.createElement("div",{onClick:this.delList,className:g.a.del},this.state.stateTxt)}}]),e}(h.Component);e.a=a.i(p.e)(v)},969:function(t,e){t.exports={del:"del-1wrdI"}}});