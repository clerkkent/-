webpackJsonp([9],{1056:function(t,e,a){"use strict";(function(t){var n=a(113),l=a.n(n),s=a(37),i=a.n(s),c=a(38),o=a.n(c),r=a(40),u=a.n(r),d=a(39),m=a.n(d),h=a(4),f=a.n(h),p=(a(114),a(965)),b=a.n(p),g=(a(214),a(964),function(e){function a(t){i()(this,a);var e=u()(this,(a.__proto__||l()(a)).call(this,t));return e.setChecked=e.setChecked.bind(e),e.state={checkStatus:0,_delAllStatus:e.props.delAllStatus||0},e}return m()(a,e),o()(a,[{key:"componentWillReceiveProps",value:function(t){var e=this;this.state._delAllStatus!==t.delAllStatus&&this.setState({_delAllStatus:t.delAllStatus},function(){e.setState({checkStatus:1===e.state._delAllStatus?1:0})})}},{key:"setChecked",value:function(e){var a=this;this.setState({_delAllStatus:0},function(){a.setState({checkStatus:0===a.state.checkStatus?1:0},function(){var e=t("#scrollWrapItem0").find(".checkbox-icon-ed").length;t("#delCount").text("("+e+")"),e>0?t("#delStatus").addClass("all-count-right").removeClass("all-count"):t("#delStatus").addClass("all-count").removeClass("all-count-right")})})}},{key:"render",value:function(){var t=this,e=this.props,a=e.item,n=e.delStatus,l=a.thread,s=[];if(l&&l.cover)try{s=JSON.parse(l.cover)}catch(t){s=[]}return f.a.createElement("div",{className:b.a["list-box-center"]},"del"===n&&f.a.createElement("div",{id:a.id,className:1===this.state._delAllStatus?"checkbox-icon-ed":2===this.state._delAllStatus?"checkbox-icon":0===this.state.checkStatus?"checkbox-icon":"checkbox-icon-ed",onClick:function(){return t.setChecked(a.id)}}),f.a.createElement("div",{className:b.a["list-box-flex"]},f.a.createElement("div",{className:b.a["list-box-item"]},f.a.createElement("div",{className:b.a["list-item-title"]},l&&l.title,s.length>0&&s.map(function(t,e){return f.a.createElement("img",{"data-preview-src":t,"data-preview-group":"topic-detail-img-"+t.id,src:t,key:e})})),f.a.createElement("div",{className:b.a.views},f.a.createElement("div",null,"阅读"),f.a.createElement("p",null,l&&l.views))),f.a.createElement("div",{className:b.a["list-time-box"]},a.created_at)))}}]),a}(h.Component));e.a=g}).call(e,a(339))},855:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t,n){var l=a(77),s=a.n(l),i=a(113),c=a.n(i),o=a(37),r=a.n(o),u=a(38),d=a.n(u),m=a(40),h=a.n(m),f=a(39),p=a.n(f),b=a(4),g=a.n(b),v=a(114),S=a(214),x=a(340),k=a(968),C=a(965),N=a.n(C),_=a(888),y=a.n(_),E=a(966),T=a(213),A=a(1056),w=a(967),I=function(e){function l(){r()(this,l);var t=h()(this,(l.__proto__||c()(l)).call(this));return t.delInfo=t.delInfo.bind(t),t.delAllMessage=t.delAllMessage.bind(t),t.delCount=t.delCount.bind(t),t.delClick=t.delClick.bind(t),t.state={delStatus:"",delTxt:"全部",delAllStatus:0,delCount:0,delNewDataStatus:!1,checkEd:[],delBtn:0,topDel:"删除"},t}return p()(l,e),d()(l,[{key:"componentWillMount",value:function(){var t=this,e=this.props.collectListList;e&&0===e.length&&this.props.dispatch(E.b({pageNum:10,page:"1",cb:function(){t.initMui()}}))}},{key:"componentDidMount",value:function(){}},{key:"initMui",value:function(){t(".home-slider").slider(),this.initPullRefresh()}},{key:"initPullRefresh",value:function(e){var a=this.props.collectListList;this.setState({delStatus:" ",delCount:0,delTxt:"全部",delAllStatus:0,delBtn:a.length>0?1:0,topDel:"删除"});var n=this;t("#refreshContainer_0").pullRefresh({down:{indicators:!1,style:"circle",color:"#2BD009",height:100,auto:!0,callback:function(){var a=this;n.props.dispatch(E.b({pageNum:10,page:"1",refresh:!0,cb:function(l){n.setState({delCount:1===n.state.delAllStatus?l.data.list.length:n.state.delCount}),a.endPulldownToRefresh(!0),a.refresh(!0),e&&t("#refreshContainer_0").scroll().scrollTo(0,0)}}))}},up:{indicators:!1,style:"circle",height:50,auto:!1,contentrefresh:"正在加载...",contentnomore:"没有更多了，逛逛网利社区其他～",callback:function(){var t=this,e=n.props.collectListPage,a=parseInt(e)+1;n.props.dispatch(E.b({pageNum:10,page:a,cb:function(e){n.setState({delCount:1===n.state.delAllStatus?n.state.delCount+e.data.data.length:n.state.delCount}),e.data.last_page>a?t.endPullupToRefresh(!1):e.data.last_page<=a&&t.endPullupToRefresh(!0)}}))}}})}},{key:"delInfo",value:function(t){this.setState({delStatus:t})}},{key:"delCount",value:function(t){var e=this;this.setState({delCount:n("#scrollWrapItem0").find(".checkbox-icon-ed").length},function(){1!==t&&0!==e.state.delCount||e.setState({delTxt:1===t||0===e.state.delCount?"全部":"取消全部"},function(){var t="全部"===e.state.delTxt?0:1;e.setState({delAllStatus:t})})})}},{key:"delAllMessage",value:function(){var t=this;this.setState({delTxt:"全部"===this.state.delTxt?"取消全部":"全部"},function(){var e="全部"===t.state.delTxt?0:1;t.setState({delAllStatus:e},function(){t.setState({delCount:n("#scrollWrapItem0").find(".checkbox-icon-ed").length})})})}},{key:"delClick",value:function(){var t=this,e=n("#messageBox").find("#scrollWrapItem0").find(".checkbox-icon-ed"),l=[];n.each(e,function(t,e){l.push(n(e).attr("id"))}),this.setState({checkEd:l},function(){t.state.checkEd.length>0&&t.Alert.show({content:"确定要清空所选消息吗？",confirm:function(){a.i(T.delBbsThreadCollect)(t.state.checkEd).then(function(e){0===e.result.code&&t.initPullRefresh(!0)})}})})}},{key:"render",value:function(){var t=this,e=this.props,a=e.initCollectState,n=e.collectListList;return g.a.createElement("div",{className:N.a["list-main"]},g.a.createElement("div",{className:"home-slider mui-slider mui-fullscreen"},g.a.createElement(x.a,{titleContent:"我的收藏",rightContent:(n.length>0||1===this.state.delBtn)&&g.a.createElement(k.a,{delInfo:this.delInfo,topDel:this.state.topDel}),titleClass:"flex-3"}),g.a.createElement("div",{className:"m-s-w-1 mui-slider-group",id:"messageBox"},g.a.createElement("div",s()({id:"scrollWrapItem0",className:N.a["list-slider-box"]},"className","mui-slider-item list-bottom mui-control-content  mui-active"),g.a.createElement("div",{id:"refreshContainer_0",className:"mui-scroll-wrapper"+("del"===this.state.delStatus?" w120":"")},g.a.createElement("div",{id:"box-0",className:N.a["box-max"]},a&&n.length>0?n.map(function(e,a){return g.a.createElement(A.a,{item:e,key:a,delStatus:t.state.delStatus,delAllStatus:t.state.delAllStatus,delCount:t.delCount})}):g.a.createElement(w.a,{className:y.a["no-collection"],title:"暂时还没有收藏喔"})))))),"del"===this.state.delStatus&&g.a.createElement("div",{className:N.a["del-main"]},g.a.createElement("div",{className:N.a["all-del"],onClick:function(){return t.delAllMessage()}},this.state.delTxt),g.a.createElement("div",{id:"delStatus",className:N.a[this.state.delCount>0?"all-count-right":"all-count"],onClick:function(){return t.delClick()}},"删除",g.a.createElement("span",{id:"delCount"},this.state.delCount>0?"("+this.state.delCount+")":""))))}}]),l}(b.Component);e.default=a.i(v.e)(a.i(S.b)(function(t){return t.list})(I))}.call(e,a(215),a(339))},888:function(t,e){t.exports={"no-collection":"no-collection-33_zG","default-panel-main":"default-panel-main-21AMA","no-comment":"no-comment-3CH7P","no-message":"no-message-1C-gb","no-thread":"no-thread-3yuWS","default-icon":"default-icon-1d3wl","jump-page":"jump-page-1wdXI"}},964:function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return i});var n=a(78),l=a(213),s=function(t){return function(e){a.i(l.getBbsUserPm)({params:[{pageNum:t.pageNum,page:t.page,type:t.type}]}).then(function(l){if(l.result){var s=l.result.data.list,i=t.page,c=t.type,o=(l.result.data.last_page,t.refresh||!1),r=s.length;"1"===i&&e(a.i(n.b)("change message count")({listLength:r})),e(a.i(n.b)("fetch message list success")({list:s,page:i,typeid:c,refresh:o})),setTimeout(function(){t.cb&&t.cb(l.result)},0)}})}},i=function(t){return function(e){a.i(l.updatePmStatus)({params:[{id:t.id}]}).then(function(t){if(t.result){var a=t.result.data;e({type:"get update pm status",pmStatus:a})}})}}},965:function(t,e){t.exports={"list-main":"list-main-eiRbM",row:"row-3lnBN","row-title":"row-title-2yIio","row-text":"row-text-2eOW3","list-slider-box":"list-slider-box-3ergh","box-max":"box-max-S994q","list-box-flex":"list-box-flex-3KjVu","list-box-center":"list-box-center-NyeP7","comment-content":"comment-content-2N-xS","comment-thread":"comment-thread-1Y_By","list-box-item":"list-box-item-1qSxw","list-item-title":"list-item-title-xrbo_",views:"views-1vfIJ","list-time-box":"list-time-box-3JQ5_","list-time-box-thread":"list-time-box-thread-3t9Y2","del-main":"del-main-11AGj","all-del":"all-del-2mT3b","all-count":"all-count-1IVir","all-count-right":"all-count-right-1z4J4"}},966:function(t,e,a){"use strict";a.d(e,"d",function(){return s}),a.d(e,"c",function(){return i}),a.d(e,"b",function(){return c}),a.d(e,"a",function(){return o});var n=a(78),l=a(213),s=function(t){return function(e){a.i(l.getBbsUserThread)({params:[{pageNum:t.pageNum,page:t.page}]}).then(function(l){if(l.result){var s=l.result.data.list,i=t.page,c=l.result.data.last_page,o=t.refresh||!1;e(a.i(n.b)("fetch bbs user thread")({list:s,page:i,lastPage:c,refresh:o})),setTimeout(function(){t.cb&&t.cb(l.result)},0)}})}},i=function(t){return function(e){a.i(l.queryBbsUserTask)().then(function(l){if(l.result){var s=l.result.data;e(a.i(n.b)("fetch bbs user task")({taskData:s})),setTimeout(function(){t.cb&&t.cb(l.result)},0)}})}},c=function(t){return function(e){a.i(l.getBbsUserCollectList)({params:[{pageNum:t.pageNum,page:t.page}]}).then(function(l){if(l.result){var s=l.result.data.data,i=t.page,c=l.result.data.last_page,o=t.refresh||!1;e(a.i(n.b)("fetch bbs user collectList")({data:s,page:i,lastPage:c,refresh:o})),setTimeout(function(){t.cb&&t.cb(l.result)},0)}})}},o=function(t){return function(e){a.i(l.getBbsUserComment)({params:[{pageNum:t.pageNum,page:t.page}]}).then(function(l){if(l.result){var s=l.result.data.data,i=t.page,c=l.result.data.last_page,o=t.refresh||!1;e(a.i(n.b)("fetch bbs user comment")({data:s,page:i,lastPage:c,refresh:o})),setTimeout(function(){t.cb&&t.cb(l.result)},0)}})}}},967:function(t,e,a){"use strict";var n=a(77),l=a.n(n),s=a(113),i=a.n(s),c=a(37),o=a.n(c),r=a(38),u=a.n(r),d=a(40),m=a.n(d),h=a(39),f=a.n(h),p=a(4),b=a.n(p),g=a(888),v=a.n(g),S=a(96),x=a.n(S),k=function(t){function e(){return o()(this,e),m()(this,(e.__proto__||i()(e)).apply(this,arguments))}return f()(e,t),u()(e,[{key:"goToIndex",value:function(){this.props.history.push("/")}},{key:"render",value:function(){var t=this,e=this.props,a=e.className,n=e.title,s=x()("default-panel",l()({},a,!!a));return b.a.createElement("section",{className:s},b.a.createElement("div",{className:v.a["default-panel-main"]},b.a.createElement("div",{className:v.a["default-panel-body"]},b.a.createElement("icon",{className:v.a["default-icon"]}),n&&b.a.createElement("p",null,n),b.a.createElement("div",{className:v.a["jump-page"],onClick:function(){return t.goToIndex()}},this.props.children))))}}]),e}(p.Component);e.a=k},968:function(t,e,a){"use strict";var n=a(113),l=a.n(n),s=a(37),i=a.n(s),c=a(38),o=a.n(c),r=a(40),u=a.n(r),d=a(39),m=a.n(d),h=a(4),f=a.n(h),p=a(114),b=a(969),g=a.n(b),v=function(t){function e(){i()(this,e);var t=u()(this,(e.__proto__||l()(e)).call(this));return t.delList=t.delList.bind(t),t.state={stateTxt:"删除",status:"del",btnStatus:0},t}return m()(e,t),o()(e,[{key:"componentWillReceiveProps",value:function(t){0===this.state.btnStatus&&this.state.stateTxt!==t.topDel&&this.setState({stateTxt:t.topDel})}},{key:"delList",value:function(){var t=this;this.setState({status:"删除"===this.state.stateTxt?"del":"cancel"},function(){t.setState({stateTxt:"del"===t.state.status?"取消":"删除",btnStatus:1},function(){t.props.delInfo(t.state.status),t.setState({btnStatus:0})})})}},{key:"render",value:function(){return f.a.createElement("div",{onClick:this.delList,className:g.a.del},this.state.stateTxt)}}]),e}(h.Component);e.a=a.i(p.e)(v)},969:function(t,e){t.exports={del:"del-1wrdI"}}});